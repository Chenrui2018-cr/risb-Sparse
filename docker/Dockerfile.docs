FROM ruby:3.2

ENV LC_ALL C.UTF-8
ENV LANG en_US.UTF-8
ENV LANGUAGE en_US.UTF-8

ENV SRC=/usr/src/app

WORKDIR /usr/src/app
COPY . $SRC

# symlink files so we do not contaminate the source build
# This won't automatically update the pages because the timestamps
# of symlinks to not get changed if original file changes. So jekyll
# never knos to update anything! That sucks
#WORKDIR /usr/src/app_serve
#RUN cp -as $SRC/* .

RUN gem install bundler
RUN bundle install

EXPOSE 4000